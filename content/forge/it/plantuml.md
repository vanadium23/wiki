---
{"dg-publish":true,"date":"2024-11-26T16:35:33+03:00","modified_at":"2025-01-13T17:34:06+03:00","tags":["status/completed","topic/software","review/pending"],"permalink":"/forge/it/plantuml/","dgPassFrontmatter":true}
---


PlantUML - текстовая нотация для создания диаграмм. Представляет из себя jar'ник, который можно натравить на текст и получить svg или png. Так же можно развернуть в виде web сервера, где будет UI.

```sh
docker run -d -p 8080:8080 plantuml/plantuml-server:jetty
```

Из уникальных отличий:
- имеет [препроцессор](https://plantuml.com/preprocessing), чтобы писать функции на нём
- у него есть поддержка разных нотаций, в том числе - [[openbox/C4 diagram|C4 diagram]]
- [можно включать диаграммы в диаграммы](https://plantuml.com/preprocessing#393335a6fd28a804)

Для текстовых редакторов и сервисов, типа Gitlab, поддерживается с помощью плагинов и настроек. Правда, для этого придётся развернуть тот же самый сервер. Это же и является главным минусом, потому что получается надо будет менять инфраструктуру.

### Настройка сервера

Так как, основная киллер фича в том, чтобы наследовать компоненты, то надо разобраться как работают include.

1. include может быть локального файла
    1. для этого надо присоединить директорию
    2. добавить её в настройки через `-Dplantuml.include.path=path/to/volume`
2. include можно делать по ссылке, [подробно](https://plantuml.com/security)
    1. разрешено только по порту 80 и 443
    2. сервер умеет в авторизацию, но надо подкладывать файл конфигураций
    3. можно пойти и поставить PLANTUML_SECURITY_PROFILE в UNSECURE и подключить всё подряд

## puml vs markdown code block

В текстовых редакторах (как минимум, в [[openbox/software/Vs Code|Vs Code]]) есть разница между тем, как плагин рисует puml файлы и как рендерит блоки кода с языком plantuml. В случае отдельного файла рендер идёт через локальный jar файл, а вот предпросмотр markdown файла будет отправлять запрос на указанный сервер. Это может привести к проблемам, что локальные файлы не смогут быть импортированы.

## Что дальше



context:: [[forge/it/инструменты для создания диаграмм|инструменты для создания диаграмм]]
problem::

## Источники



- 

## Как улучшить

- [x] расписать детальнее про include, SECURE_PROFILES и настройки plantuml server ✅ 2025-01-13
