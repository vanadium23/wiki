---
{"dg-publish":true,"tags":["status/writing"],"date":"2025-04-08T15:37:29+03:00","modified_at":"2025-04-10T11:33:44+03:00","permalink":"/forge/it/load balancing/","dgPassFrontmatter":true}
---


Балансировка запросов - один из первых элементов, который возникает при переходе к [[forge/it/распределённые системы|распределённым системам]]. 
Есть два варианта, как это можно добавить:
1. иметь отдельные узлы, которые умеют распределять трафик
    1. примеры софта: HAProxy, nginx, traefik
2. иметь знание о всех участниках кластера внутри каждого узла
    1. примеры софта: etcd, consul, zookeeper (надо похоронить)

Популярные варианты балансировок:
- round robin - раскидываем запросы последовательно по всему списку участников
    - плюсы: прямолинейная реализация, поддерживает большинство софта
    - минусы: запросы неравномерные по стоимости, сервера могут быть разные
- weighted round robin - раскидываем запросы согласно весам
    - плюсы: можно слать больше запросов на жирные сервера
    - минусы: ручной контроль распределения
- least connection - раскидываем на сервера, с которыми меньше всего соединений активных
    - плюсы: запросы автоматически равномерно распределяются
    - минусы: сложно понять куда что улетит
- sticky session - одинаковые запросы раскидываются на одни и те же сервера
    - плюсы: можно сделать запросы быстрее
    - минусы: ручной контроль распределения

## Что дальше



context:: [[forge/it/распределённые системы|распределённые системы]]
problem:: [[forge/it/масштабирование сервисов|масштабирование сервисов]]

## Источники



- [Отличная визуализация разных подходов](https://samwho.dev/load-balancing/)

## Как улучшить

- [ ] перечитать sam who, и дополнить варианты
